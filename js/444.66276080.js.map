{"version":3,"file":"js/444.66276080.js","mappings":"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","sources":["webpack://front-end/./node_modules/core-js/internals/define-built-in-accessor.js","webpack://front-end/./node_modules/core-js/internals/regexp-flags.js","webpack://front-end/./node_modules/core-js/modules/es.regexp.flags.js","webpack://front-end/./src/views/Attendance.vue","webpack://front-end/./src/useGeolocation.js","webpack://front-end/../node_modules/fast-deep-equal/index.js","webpack://front-end/../src/index.ts","webpack://front-end/./src/views/Attendance.vue?946f"],"sourcesContent":["var makeBuiltIn = require('../internals/make-built-in');\nvar defineProperty = require('../internals/object-define-property');\n\nmodule.exports = function (target, name, descriptor) {\n  if (descriptor.get) makeBuiltIn(descriptor.get, name, { getter: true });\n  if (descriptor.set) makeBuiltIn(descriptor.set, name, { setter: true });\n  return defineProperty.f(target, name, descriptor);\n};\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.hasIndices) result += 'd';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.unicodeSets) result += 'v';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","var global = require('../internals/global');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar regExpFlags = require('../internals/regexp-flags');\nvar fails = require('../internals/fails');\n\n// babel-minify and Closure Compiler transpiles RegExp('.', 'd') -> /./d and it causes SyntaxError\nvar RegExp = global.RegExp;\nvar RegExpPrototype = RegExp.prototype;\n\nvar FORCED = DESCRIPTORS && fails(function () {\n  var INDICES_SUPPORT = true;\n  try {\n    RegExp('.', 'd');\n  } catch (error) {\n    INDICES_SUPPORT = false;\n  }\n\n  var O = {};\n  // modern V8 bug\n  var calls = '';\n  var expected = INDICES_SUPPORT ? 'dgimsy' : 'gimsy';\n\n  var addGetter = function (key, chr) {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty(O, key, { get: function () {\n      calls += chr;\n      return true;\n    } });\n  };\n\n  var pairs = {\n    dotAll: 's',\n    global: 'g',\n    ignoreCase: 'i',\n    multiline: 'm',\n    sticky: 'y'\n  };\n\n  if (INDICES_SUPPORT) pairs.hasIndices = 'd';\n\n  for (var key in pairs) addGetter(key, pairs[key]);\n\n  // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n  var result = Object.getOwnPropertyDescriptor(RegExpPrototype, 'flags').get.call(O);\n\n  return result !== expected || calls !== expected;\n});\n\n// `RegExp.prototype.flags` getter\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nif (FORCED) defineBuiltInAccessor(RegExpPrototype, 'flags', {\n  configurable: true,\n  get: regExpFlags\n});\n","<template>\n  <div class=\"container py-5\">\n    <!-- 使用 NavTabs 元件 -->\n    <NavTabs />\n\n    <h1 class=\"mt-5\">\n      首頁 - 出勤打卡頁面\n    </h1>\n\n    <div class=\"d-flex text-center\" style=\"height: 20vh\">\n      <div class=\"m-auto\">\n        <h4>Your Position</h4>\n        Latitude: {{ currPos.lat.toFixed(2) }}, Longitude:\n        {{ currPos.lng.toFixed(2) }}\n      </div>\n      <div class=\"m-auto\">\n        <h4>Distance</h4>\n        {{ distance.toFixed(2) }} miles\n      </div>\n      <div class=\"m-auto\">\n        <h4>Company Position</h4>\n        <span v-if=\"otherPos\">\n          Latitude: {{ otherPos.lat.toFixed(2) }}, Longitude:\n          {{ otherPos.lng.toFixed(2) }}\n        </span>\n        <span v-else>Click the map to select a position</span>\n      </div>\n    </div>\n    <div ref=\"mapDiv\" style=\"width: 100%; height: 50vh;\" />\n    \n    <button\n      v-if=\"attendance.isLeaveWork\"\n      type=\"button\"\n      class=\"btn btn-danger btn-border favorite mr-2\"\n      @click.stop.prevent=\"leaveWork()\">\n      下班卡打\n    </button>\n    <button\n      v-else\n      type=\"button\"\n      class=\"btn btn-warning\"\n      style=\"margin-top: 20px;\"\n      @click.stop.prevent=\"addAttendance()\"\n    >\n      上班卡打\n    </button>\n\n  </div>\n</template>\n\n<script>\nimport NavTabs from './../components/NavTabs'\nimport { computed, ref, onMounted, watch } from 'vue'\nimport { useGeolocation } from './../useGeolocation'\nimport { Loader } from '@googlemaps/js-api-loader'\nconst GOOGLE_MAPS_API_KEY = process.env.VUE_APP_Google_Maps_API_Key\nimport attendancesAPI from './../apis/attendances'\nimport { Toast } from './../utils/helpers'\n\nexport default {\n  name: 'App',\n  setup() {\n    const { coords } = useGeolocation()\n    const currPos = computed(() => ({\n      lat: 25.056472 || coords.value.latitude, // 假設當前位址在公司附近\n      lng: 121.610744 || coords.value.longitude\n    }))\n    const otherPos = ref(null)\n    otherPos.value = { lat: 25.058515, lng: 121.611872 }\n    const loader = new Loader({ apiKey: GOOGLE_MAPS_API_KEY })\n    const mapDiv = ref(null)\n    let map = ref(null)\n    onMounted(async () => {\n      await loader.load()\n      map.value = new window.google.maps.Map(mapDiv.value, {\n        center: otherPos.value,\n        zoom: 7\n      })\n    })\n    \n    let line = null\n    watch([map, currPos, otherPos], () => {\n      if (line) line.setMap(null)\n      if (map.value && otherPos.value != null)\n        line = new window.google.maps.Polyline({\n          path: [currPos.value, otherPos.value],\n          map: map.value\n        })\n    })\n    const haversineDistance = (pos1, pos2) => {\n      const R = 3958.8 // Radius of the Earth in miles\n      const rlat1 = pos1.lat * (Math.PI / 180) // Convert degrees to radians\n      const rlat2 = pos2.lat * (Math.PI / 180) // Convert degrees to radians\n      const difflat = rlat2 - rlat1 // Radian difference (latitudes)\n      const difflon = (pos2.lng - pos1.lng) * (Math.PI / 180) // Radian difference (longitudes)\n      const d =\n        2 *\n        R *\n        Math.asin(\n          Math.sqrt(\n            Math.sin(difflat / 2) * Math.sin(difflat / 2) +\n            Math.cos(rlat1) *\n            Math.cos(rlat2) *\n            Math.sin(difflon / 2) *\n            Math.sin(difflon / 2)\n          )\n        )\n      return d\n    }\n    const distance = computed(() =>\n      otherPos.value === null\n        ? 0\n        : haversineDistance(currPos.value, otherPos.value)\n    )\n    return { currPos, otherPos, distance, mapDiv }\n  },\n  components: {\n    NavTabs\n  },\n  data() {\n    return { // component 需要使用 function return 來回傳資料\n      attendance: {\n        account: '',\n        name: '',\n        created_at: '',\n        updated_at: '',\n        isProcessing: false\n      },\n    }\n  },\n  methods: {\n    // 改用 async/await 語法\n    async addAttendance() {\n      try {\n        // 抓取當前的使用者\n        const formData = JSON.parse(localStorage.getItem('userInfo'))\n\n        // 使用撰寫好的 addAttendance 方法去呼叫 API，並取得回傳內容\n        const { data } = await attendancesAPI.addAttendance({ formData })\n\n        // 若請求過程有錯，則進到錯誤處理\n        if (data.status === 'error') {\n          throw new Error(data.message)\n        }\n\n        Toast.fire({\n          icon: 'success',\n          title: '打卡成功，祝你有美好的一天'\n        })\n      } catch (error) {\n        // 請求失敗的話則跳出錯誤提示\n        Toast.fire({\n          icon: 'error',\n          title: '無法打卡，請稍後再試'\n        })\n      }\n    }\n  },\n  beforeRouteUpdate (to, from, next) {\n    const { id: AttendanceId } = to.params\n    this.fetchAttendance( AttendanceId )\n    next()\n  }\n}\n</script>","import { onUnmounted, onMounted, ref } from 'vue'\n\nexport function useGeolocation() {\n  const coords = ref({ \n    // 鈦坦地址: 台北市南港區園區街3之1號11樓之1號\n    latitude: 25.058535, longitude: 121.611882\n  }) \n  const isSupported = 'navigator' in window && 'geolocation' in navigator\n\n  let watcher = null\n  onMounted(() => {\n    if (isSupported)\n      watcher = navigator.geolocation.watchPosition(\n        position => (coords.value = position.coords)\n      )\n  })\n  onUnmounted(() => {\n    if (watcher) navigator.geolocation.clearWatch(watcher)\n  })\n\n  return { coords, isSupported }\n}","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n",null,"import { render } from \"./Attendance.vue?vue&type=template&id=20e3bbb6\"\nimport script from \"./Attendance.vue?vue&type=script&lang=js\"\nexport * from \"./Attendance.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/elliot/Documents/attendance-systems/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["makeBuiltIn","defineProperty","module","exports","target","name","descriptor","get","getter","set","setter","f","anObject","that","this","result","hasIndices","global","ignoreCase","multiline","dotAll","unicode","unicodeSets","sticky","DESCRIPTORS","defineBuiltInAccessor","regExpFlags","fails","RegExp","RegExpPrototype","prototype","FORCED","INDICES_SUPPORT","error","O","calls","expected","addGetter","key","chr","Object","pairs","getOwnPropertyDescriptor","call","configurable","class","_createElementVNode","style","ref","_createElementBlock","_hoisted_1","_createVNode","_component_NavTabs","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","$setup","lat","toFixed","lng","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_12","$data","isLeaveWork","type","onClick","_ctx","$options","useGeolocation","coords","latitude","longitude","isSupported","window","navigator","watcher","onMounted","geolocation","watchPosition","position","value","onUnmounted","clearWatch","equal","a","b","constructor","length","i","keys","Array","isArray","source","flags","valueOf","toString","hasOwnProperty","DEFAULT_ID","LoaderStatus","Loader","apiKey","authReferrerPolicy","channel","client","id","language","libraries","mapIds","nonce","region","retries","url","version","instance","isEqual","options","Error","stringify","JSON","status","errors","FAILURE","done","SUCCESS","loading","LOADING","INITIALIZED","failed","createUrl","CALLBACK","join","deleteScript","script","document","getElementById","remove","load","loadPromise","Promise","resolve","reject","loadCallback","err","google","fn","callbacks","push","execute","setScript","callback","createElement","src","onerror","loadErrorCallback","bind","defer","async","head","appendChild","reset","onerrorEvent","resetIfRetryingFailed","e","delay","Math","console","log","setTimeout","setCallback","__googleMapsCallback","forEach","cb","maps","warn","GOOGLE_MAPS_API_KEY","process","setup","currPos","computed","otherPos","loader","mapDiv","map","Map","center","zoom","line","watch","setMap","Polyline","path","haversineDistance","pos1","pos2","R","rlat1","PI","rlat2","difflat","difflon","d","asin","sqrt","sin","cos","distance","components","NavTabs","data","attendance","account","created_at","updated_at","isProcessing","methods","formData","parse","localStorage","getItem","attendancesAPI","message","Toast","icon","title","beforeRouteUpdate","to","from","next","AttendanceId","params","fetchAttendance","__exports__","render"],"sourceRoot":""}